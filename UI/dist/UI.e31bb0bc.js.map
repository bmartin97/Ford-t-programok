{"version":3,"sources":["index.js"],"names":["state","roles","roles_table","document","querySelector","start_btn","display","input_func","delay","input","output","rules","disableUserInteractions","inputs","querySelectorAll","button","disabled","forEach","enableUserInteractions","console","log","addEventListener","evt","input_function","value","innerHTML","replace","split","solverLoop","window","index","getRuleCellIndex","getNextChar","rule","getRule","substr","length","rule_number","showOnDisplay","setTimeout","Number","text","x","y","x_headers","x_index","findIndex","head","y_headers","y_index","previusUsedCell","classList","remove","add","tempRule","insertAdjacentHTML"],"mappings":"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","file":"UI.e31bb0bc.js","sourceRoot":"..","sourcesContent":["let state = {\r\n    roles: [],\r\n}\r\n\r\nconst roles_table = document.querySelector(\"#roles-table\");\r\nconst start_btn = document.querySelector(\"#start-btn\");\r\nconst display = document.querySelector(\"#display\");\r\nconst input_func = document.querySelector(\"#input-function\");\r\nconst delay = document.querySelector(\"#delay\");\r\n\r\nlet input, output, rules;\r\n\r\nfunction disableUserInteractions() {\r\n    const inputs = document.querySelectorAll(\"input\");\r\n    const button = document.querySelector(\"button\").disabled = true;\r\n    inputs.forEach(input => input.disabled = true);\r\n}\r\n\r\nfunction enableUserInteractions() {\r\n    console.log(\"enable\");\r\n    const inputs = document.querySelectorAll(\"input\");\r\n    console.log(inputs);\r\n    document.querySelector(\"button\").disabled = false;\r\n    inputs.forEach(input => input.disabled = false);\r\n}\r\n\r\n\r\nstart_btn.addEventListener('click', function(evt) {\r\n    disableUserInteractions();\r\n\r\n    let input_function = input_func.value;\r\n    display.innerHTML = `<div class=\"header\">${input_function}</div>`;\r\n        \r\n    input_function = input_function.replace('(','').replace(')','');\r\n    input_function = input_function.split(',');\r\n    \r\n    input = input_function[0];\r\n    output = input_function[1];\r\n    rules = input_function[2];\r\n\r\n    rules = rules.replace(\"ε\", \"\");\r\n    \r\n    solverLoop();    \r\n});\r\n\r\nwindow.solverLoop = solverLoop;\r\n\r\nfunction solverLoop() {\r\n    let index = getRuleCellIndex(getNextChar(input), getNextChar(output));\r\n    let rule = getRule(index);\r\n    \r\n    switch (rule) {\r\n        case \"pop\":\r\n            input = input.substr(getNextChar(input).length);\r\n            output = output.substr(getNextChar(output).length);\r\n            break;\r\n        case \"elfogad\":\r\n            display.innerHTML += '<div class=\"success\">✔ elfogad</div>';\r\n            enableUserInteractions();\r\n            return;\r\n    \r\n        default:\r\n            output = output.substr(getNextChar(output).length);\r\n            if(rule.rule !== \"ε\") {\r\n                output = rule.rule + output;\r\n            }\r\n            rules = rules + rule.rule_number;\r\n            break;\r\n    }\r\n    showOnDisplay(rule);\r\n    setTimeout(solverLoop, Number(delay.value));\r\n}\r\n\r\nfunction getNextChar(text) {\r\n    if(text.length > 2 && text[1] === \"'\") {\r\n        return text[0] + text[1];\r\n    } else {\r\n        return text[0];\r\n    }\r\n}\r\n\r\nfunction getRuleCellIndex(x, y) {\r\n    const x_headers = roles_table.querySelectorAll(\"thead > tr > th\");\r\n    const x_index = [...x_headers].findIndex(head => head.innerHTML === x);\r\n    if(x_index === -1) {\r\n        display.innerHTML += `<div class=\"warning\">⚠ invalid karakter: ${x}</div>`;\r\n        enableUserInteractions();\r\n\r\n        throw \"not found x value\";\r\n    }\r\n    const y_headers = roles_table.querySelectorAll(\"tbody > tr > td:first-child\");\r\n    const y_index = [...y_headers].findIndex(head => head.innerHTML === y);\r\n    if(y_index === -1) {\r\n        display.innerHTML += `<div class=\"warning\">⚠ invalid karakter: ${y}</div>`;\r\n        enableUserInteractions();\r\n        throw \"not found y value\";\r\n    }\r\n\r\n    return { x: x_index + 1, y: y_index + 1};\r\n}\r\n\r\nfunction getRule({x, y}) {\r\n    let rule = roles_table.querySelector(`tbody tr:nth-child(${y}) > td:nth-child(${x})`);\r\n\r\n    const previusUsedCell = roles_table.querySelector(\".use\");\r\n    if(previusUsedCell) {\r\n        previusUsedCell.classList.remove(\"use\");\r\n    }\r\n\r\n    rule.classList.add(\"use\");\r\n\r\n    rule = rule.querySelector(\"input\").value;\r\n    if(rule !== \"\") {\r\n        if(rule !== \"pop\" && rule !== \"elfogad\") {\r\n            rule = rule.split(',');\r\n            return {\r\n                rule: rule[0].replace('(',''),\r\n                rule_number: rule[1].replace(')','')\r\n            }\r\n        } else {\r\n            return rule;\r\n        }\r\n    } else {\r\n        display.innerHTML += '<div class=\"wrong\">✖ elutasít</div>';\r\n        enableUserInteractions();\r\n        throw \"empty rule cell\"\r\n    }\r\n}\r\n\r\nfunction showOnDisplay(rule) {\r\n    const tempRule = rule !== \"pop\" ? `<span class=\"coral-highlight\">(${rule.rule}, ${rule.rule_number})</span>` : `<span class=\"pop-highlight\">${rule}</span>`;\r\n    display.insertAdjacentHTML('beforeend', `\r\n    <div class=\"row\">\r\n        <div class=\"rule\">\r\n            ${tempRule}\r\n        </div>\r\n        <div class=\"output\">\r\n            <div class=\"column\">\r\n                (\r\n            </div>\r\n            <div class=\"column\">\r\n                <span>${input},</span>\r\n            </div>\r\n            <div class=\"column\">\r\n                ${output},\r\n            </div>\r\n            <div class=\"column\">\r\n                ${rules}\r\n            </div>\r\n            <div class=\"column\">\r\n                )\r\n            </div>\r\n        </div>\r\n    </div>\r\n    `);\r\n}"]}