{"version":3,"sources":["index.js"],"names":["state","roles","roles_table","document","querySelector","start_btn","display","input_func","delay","input","output","rules","disableUserInteractions","inputs","querySelectorAll","button","disabled","forEach","enableUserInteractions","init","console","log","input_function","value","innerHTML","replace","split","addEventListener","evt","solverLoop","window","index","getRuleCellIndex","getNextChar","rule","getRule","substr","length","rule_number","showOnDisplay","setTimeout","Number","text","x","y","x_headers","x_index","findIndex","head","y_headers","y_index","previusUsedCell","classList","remove","add","tempRule","insertAdjacentHTML"],"mappings":"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","file":"UI.e31bb0bc.js","sourceRoot":"..","sourcesContent":["let state = {\r\n    roles: [],\r\n}\r\n\r\nconst roles_table = document.querySelector(\"#roles-table\");\r\nconst start_btn = document.querySelector(\"#start-btn\");\r\nconst display = document.querySelector(\"#display\");\r\nconst input_func = document.querySelector(\"#input-function\");\r\nconst delay = document.querySelector(\"#delay\");\r\n\r\nlet input, output, rules;\r\n\r\nfunction disableUserInteractions() {\r\n    const inputs = document.querySelectorAll(\"input\");\r\n    const button = document.querySelector(\"button\").disabled = true;\r\n    inputs.forEach(input => input.disabled = true);\r\n}\r\n\r\nfunction enableUserInteractions() {\r\n    const inputs = document.querySelectorAll(\"input\");\r\n    document.querySelector(\"button\").disabled = false;\r\n    inputs.forEach(input => input.disabled = false);\r\n}\r\n\r\nfunction init() {\r\n    console.log(\"save\");\r\n    let input_function = input_func.value;\r\n    display.innerHTML = `<div class=\"header\">${input_function}</div>`;\r\n  \r\n    input_function = input_function.replace('(','').replace(')','');\r\n    input_function = input_function.split(',');\r\n    \r\n    input = input_function[0];\r\n    output = input_function[1];\r\n    rules = input_function[2];\r\n\r\n    rules = rules.replace(\"ε\", \"\");\r\n}\r\n\r\nstart_btn.addEventListener('click', function(evt) {\r\n    disableUserInteractions();\r\n    \r\n    init();\r\n\r\n    solverLoop();    \r\n});\r\n\r\nwindow.solverLoop = solverLoop;\r\n\r\nfunction solverLoop() {\r\n    let index = getRuleCellIndex(getNextChar(input), getNextChar(output));\r\n    let rule = getRule(index);\r\n    \r\n    switch (rule) {\r\n        case \"pop\":\r\n            input = input.substr(getNextChar(input).length);\r\n            output = output.substr(getNextChar(output).length);\r\n            break;\r\n        case \"elfogad\":\r\n            display.innerHTML += '<div class=\"success\">✔ elfogad</div>';\r\n            enableUserInteractions();\r\n            return;\r\n    \r\n        default:\r\n            output = output.substr(getNextChar(output).length);\r\n            if(rule.rule !== \"ε\") {\r\n                output = rule.rule + output;\r\n            }\r\n            rules = rules + rule.rule_number;\r\n            break;\r\n    }\r\n    showOnDisplay(rule);\r\n    setTimeout(solverLoop, Number(delay.value));\r\n}\r\n\r\nfunction getNextChar(text) {\r\n    if(text.length > 2 && text[1] === \"'\") {\r\n        return text[0] + text[1];\r\n    } else {\r\n        return text[0];\r\n    }\r\n}\r\n\r\nfunction getRuleCellIndex(x, y) {\r\n    const x_headers = roles_table.querySelectorAll(\"thead > tr > th\");\r\n    const x_index = [...x_headers].findIndex(head => head.innerHTML === x);\r\n    if(x_index === -1) {\r\n        display.innerHTML += `<div class=\"warning\">⚠ invalid karakter: ${x}</div>`;\r\n        enableUserInteractions();\r\n\r\n        throw \"not found x value\";\r\n    }\r\n    const y_headers = roles_table.querySelectorAll(\"tbody > tr > td:first-child\");\r\n    const y_index = [...y_headers].findIndex(head => head.innerHTML === y);\r\n    if(y_index === -1) {\r\n        display.innerHTML += `<div class=\"warning\">⚠ invalid karakter: ${y}</div>`;\r\n        enableUserInteractions();\r\n        throw \"not found y value\";\r\n    }\r\n\r\n    return { x: x_index + 1, y: y_index + 1};\r\n}\r\n\r\nfunction getRule({x, y}) {\r\n    let rule = roles_table.querySelector(`tbody tr:nth-child(${y}) > td:nth-child(${x})`);\r\n\r\n    const previusUsedCell = roles_table.querySelector(\".use\");\r\n    if(previusUsedCell) {\r\n        previusUsedCell.classList.remove(\"use\");\r\n    }\r\n\r\n    rule.classList.add(\"use\");\r\n\r\n    rule = rule.querySelector(\"input\").value;\r\n    if(rule !== \"\") {\r\n        if(rule !== \"pop\" && rule !== \"elfogad\") {\r\n            rule = rule.split(',');\r\n            return {\r\n                rule: rule[0].replace('(',''),\r\n                rule_number: rule[1].replace(')','')\r\n            }\r\n        } else {\r\n            return rule;\r\n        }\r\n    } else {\r\n        display.innerHTML += '<div class=\"wrong\">✖ elutasít</div>';\r\n        enableUserInteractions();\r\n        throw \"empty rule cell\"\r\n    }\r\n}\r\n\r\nfunction showOnDisplay(rule) {\r\n    const tempRule = rule !== \"pop\" ? `<span class=\"coral-highlight\">(${rule.rule}, ${rule.rule_number})</span>` : `<span class=\"pop-highlight\">${rule}</span>`;\r\n    display.insertAdjacentHTML('beforeend', `\r\n    <div class=\"row\">\r\n        <div class=\"rule\">\r\n            ${tempRule}\r\n        </div>\r\n        <div class=\"output\">\r\n            <div class=\"column\">\r\n                (\r\n            </div>\r\n            <div class=\"column\">\r\n                <span>${input},</span>\r\n            </div>\r\n            <div class=\"column\">\r\n                ${output},\r\n            </div>\r\n            <div class=\"column\">\r\n                ${rules}\r\n            </div>\r\n            <div class=\"column\">\r\n                )\r\n            </div>\r\n        </div>\r\n    </div>\r\n    `);\r\n}"]}